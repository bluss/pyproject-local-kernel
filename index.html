
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="FAQ/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.40">
    
    
      
        <title>Pyproject Local Kernel</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="static/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pyproject-local-jupyter-kernel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine classes -->



<!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="Header"
  >

    <!-- Link to home -->
    <a
      href="."
      title="Pyproject Local Kernel"
      class="md-header__button md-logo"
      aria-label="Pyproject Local Kernel"
      data-md-component="logo"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pyproject Local Kernel
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette toggle -->
    

    <!-- User preference: color palette -->
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>

      <!-- Search interface -->
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    
        <div class="pypi_badge">
    <a href="https://pypi.org/project/pyproject-local-kernel/" title="pyproject-local-kernel at Python Package Index">
        <img src="https://img.shields.io/pypi/v/pyproject-local-kernel?style=for-the-badge&logo=python&logoColor=yellow&color=000050&labelColor=3f6ec6"/>
    </a>
</div>
    

    <!-- Repository information -->
    
      <div class="md-header__source">
        <a href="https://github.com/bluss/pyproject-local-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bluss/pyproject-local-kernel
  </div>
</a>
      </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="FAQ/" class="md-tabs__link">
        
  
    
  
  FAQ

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="CHANGELOG/" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Pyproject Local Kernel" class="md-nav__button md-logo" aria-label="Pyproject Local Kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Pyproject Local Kernel
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bluss/pyproject-local-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bluss/pyproject-local-kernel
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start-jupyterlab" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start (JupyterLab)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-experience" class="md-nav__link">
    <span class="md-ellipsis">
      User Experience
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-cmd" class="md-nav__link">
    <span class="md-ellipsis">
      python-cmd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-venv" class="md-nav__link">
    <span class="md-ellipsis">
      use-venv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sanity-check" class="md-nav__link">
    <span class="md-ellipsis">
      sanity-check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyprojectkernelprovisioner" class="md-nav__link">
    <span class="md-ellipsis">
      PyprojectKernelProvisioner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-particular-project-managers" class="md-nav__link">
    <span class="md-ellipsis">
      About Particular Project Managers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-status" class="md-nav__link">
    <span class="md-ellipsis">
      Project Status
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" class="md-nav__link">
    <span class="md-ellipsis">
      Links
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="FAQ/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="pyproject-local-jupyter-kernel">Pyproject Local Jupyter Kernel</h1>
<p class="web_hidden">

[Website][] - [PyPI][] [![PyPI - Python Version](https://img.shields.io/pypi/v/pyproject-local-kernel)][PyPi]

</p>

<p>Separate dependencies for Jupyter notebooks - each notebook
project can have its own dependencies!</p>
<p>Instead of installing a myriad of Jupyter kernelspecs, one per project, with
this solution there is only one <a href="https://jupyter-client.readthedocs.io/en/latest/provisioning.html">kernel provisioner</a> that enables the
environment for the project the notebook file resides in. This approach should
be more portable, usable to anyone who checks out your project structure from
git, and easier to use.</p>
<p>Pyproject Local supports <strong>Uv, Poetry, Hatch, Rye, and PDM</strong>
and reads <code>pyproject.toml</code> to figure out which kind of project it is.
Or it can use a custom command or a bare virtual environment directly.</p>
<p><img alt="screenshot of notebook launcher" src="https://raw.githubusercontent.com/bluss/pyproject-local-kernel/main/docs/images/pyproject-local.png" /></p>
<h2 id="quick-start-jupyterlab">Quick Start (JupyterLab)</h2>
<ol>
<li>Install pyproject-local-kernel in your Jupyterlab environment and restart
   Jupyterlab</li>
<li>Create a new directory for the notebook project</li>
<li>Create a new notebook and select the <strong>Pyproject Local</strong> kernel</li>
<li>In the <em>“fallback”</em> environment that appears - because it is an empty
   project - create a new project.</li>
</ol>
<p>(Example for Uv:)</p>
<p><code>!uv init &amp;&amp; uv add ipykernel</code></p>
<ol start="5">
<li>Use the restart button in JupyterLab to restart the kernel after these changes.</li>
<li>Dependencies will quickly sync and you are good to go!</li>
<li>Use more <code>add</code> commands to add further dependencies.</li>
</ol>
<p>See the examples directory for how to setup Jupyterlab and notebook projects
separately. JupyterLab and the notebook are installed in separate environments.</p>
<p>Do you want to use pyproject-local-kernel in other environments, like with
papermill, <strong>VSCodium or VS Code</strong>, or or other ways? See our <a href="FAQ/">FAQ</a> for more
information.</p>
<h2 id="user-experience">User Experience</h2>
<p>If started in an empty directory or where a project is not correctly set up,
the Pyproject Local will fail to start normally, but it will start a fallback
kernel so that you can fix the project.</p>
<p>It will show a message like this - with some details about the error.</p>
<div class="highlight"><pre><span></span><code><span class="gs">! Error: Could not find `ipykernel` in environment.</span>
<span class="gs">! Add `ipykernel` as a dependency in your project and update the virtual environment.</span>
<span class="gs">! The detected project type is: Unknown</span>
<span class="gs">!</span>
<span class="gs">! This is a fallback - pyproject-local-kernel failed to start.</span>
<span class="gs">! The purpose of the fallback is to let you run shell commands to fix the</span>
<span class="gs">! environment - when you are done, restart the kernel and try again!</span>
</code></pre></div>
<p>Remember that you can also use Jupyterlab's embedded terminal to help setting
up a project.</p>
<p><strong><em>If <code>pyproject.toml</code> is Missing</em></strong></p>
<p>If the Pyproject Local kernel is selected in a project where there is no <code>pyproject.toml</code>,
then starting the kernel fails. On first run it should show an error message in JupyterLab.</p>
<p>If this happens, create a new <code>pyproject.toml</code> with the editor or use
one of the project init commands to create a new project.</p>
<p><strong><em>If the <code>ipykernel</code> is Missing</em></strong></p>
<p>The notebook project needs to install <code>ipykernel</code> as a dependency.</p>
<p>Edit the <code>pyproject.toml</code> to include <code>ipykernel</code> in dependencies:</p>
<div class="highlight"><pre><span></span><code><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;ipykernel&gt;=6.29&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="c1"># .. more dependencies</span>
<span class="p">]</span>
</code></pre></div>
<p>sync the changes to the project using sync command for the project
manager you use, then restart the Pyproject local kernel in Jupyterlab.</p>
<h2 id="configuration">Configuration</h2>
<p>Configuration is optional and is read from <code>pyproject.toml</code>. Only the
<code>pyproject.toml</code> closest to the notebook is read. Defaults are based on
“sniffing” the <code>pyproject.toml</code> to detect which project manager is in use.</p>
<h3 id="python-cmd"><code>python-cmd</code></h3>
<p>The key <code>tool.pyproject-local-kernel.python-cmd</code> should be a command that runs
python from the environment you want to use for the project.</p>
<p>If this is set then it overrides the default command. There is further
explanation in <a href="FAQ/#how-does-the-python-cmd-configuration-work">the FAQ</a>.</p>
<p><strong>Default:</strong> <em>Depends on project manager</em><br>
<strong>Type:</strong> <code>list[str] | str</code><br>
<strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.pyproject-local-kernel]</span>
<span class="n">python-cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;uv&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--with&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ipykernel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">]</span>
</code></pre></div>
<h3 id="use-venv"><code>use-venv</code></h3>
<p>Path to virtual environment that should be used, relative to the
<code>pyproject.toml</code> file. Can also be an absolute path.</p>
<p>If this is set then it overrides the default command - the virtualenv is used
directly without invoking any project manager. Remember to explicitly install
or sync required dependencies.</p>
<p><strong>Default:</strong> Not set<br>
<strong>Type:</strong> <code>str</code><br>
<strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.pyproject-local-kernel]</span>
<span class="n">use-venv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;.venv&quot;</span>
</code></pre></div>
<h3 id="sanity-check"><code>sanity-check</code></h3>
<p>If <code>true</code>, then run a check for <code>ipykernel</code> being installed in the project
before starting the kernel process.</p>
<p><strong>Default:</strong> true<br>
<strong>Type:</strong> <code>bool</code><br>
<strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">[tool.pyproject-local-kernel]</span>
<span class="n">sanity-check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<h3 id="pyprojectkernelprovisioner"><code>PyprojectKernelProvisioner</code></h3>
<p>The kernel provisioner is configurable in the same way as other Jupyter
objects, with the following settings. They can be set in your
<code>jupyter_lab_config.py</code> settings file.
When possible, prefer to use settings in <code>pyproject.toml</code> instead, to keep them
close to the project.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># PyprojectKernelProvisioner(LocalProvisioner) configuration</span>
<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1">## Enable sanity check for &#39;ipykernel&#39; package in environment</span>
<span class="c1">#  Default: True</span>
<span class="c1"># c.PyprojectKernelProvisioner.sanity_check = True</span>

<span class="c1">## Default setting for use-venv for projects using the &#39;use-venv&#39; kernel</span>
<span class="c1">#  Default: &#39;.venv&#39;</span>
<span class="c1"># c.PyprojectKernelProvisioner.use_venv = &#39;.venv&#39;</span>
</code></pre></div>
<h2 id="about-particular-project-managers">About Particular Project Managers</h2>
<p>The project manager command, be it rye, uv, pdm, etc needs to be
available on the path where Jupyterlab runs. Either install the project
manager in the Jupyterlab environment, or install the project manager
user-wide (using something like pipx, uv tool, rye tools, brew, or
other method to install it.)</p>
<p><strong><em>Uv</em></strong></p>
<ul>
<li>
<p>Uv is detected if the pyproject.toml contains <code>tool.uv</code>. It is also the
  default fallback if no project manager is detected from a pyproject file.</p>
</li>
<li>
<p>The command used is <code>uv run --with ipykernel python</code> which means that it ensures
  <code>ipykernel</code> is used even if it's not already in the project(!). However, note that
  it uses an <a href="https://docs.astral.sh/uv/reference/cli/">ephemeral virtual environment</a> for ipykernel in that case.
  Add ipykernel to the project to avoid this.</p>
</li>
</ul>
<p><strong><em>Rye</em></strong></p>
<ul>
<li>Rye is detected if the pyproject.toml contains <code>tool.rye.managed = true</code>
  which Rye sets by default for its new projects.</li>
</ul>
<p><strong><em>PDM</em></strong></p>
<ul>
<li>PDM is detected if pyproject.toml contains <code>tool.pdm</code></li>
</ul>
<p><strong><em>Hatch</em></strong></p>
<ul>
<li>
<p>Hatch is detected if pyproject.toml contains <code>tool.hatch.envs</code></p>
</li>
<li>
<p>By default it calls out to <code>hatch env find</code>, to find the default virtualenv,
  and runs from there. <code>hatch run</code> should not be used directly because
  it's not compatible with how kernel interrupts work (as of this writing).</p>
</li>
<li>
<p>It's best to create the hatch project, add ipykernel as dependency and sync
  dependencies in a terminal before starting (it does not work so well with
  shell commands in a notebook).</p>
</li>
</ul>
<p><strong><em>Poetry</em></strong></p>
<ul>
<li>
<p>Poetry is detected if pyproject.toml contains <code>tool.poetry.name</code></p>
</li>
<li>
<p>Some commands are interactive by default and don't work in a notebook,
  but they have an <code>-n</code> switch to make them non-interactive.</p>
</li>
</ul>
<h2 id="project-status">Project Status</h2>
<p>Additional interest and maintainer help is welcomed.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://github.com/astral-sh/uv">https://github.com/astral-sh/uv</a></li>
<li><a href="https://github.com/renan-r-santos/pixi-kernel">https://github.com/renan-r-santos/pixi-kernel</a></li>
<li><a href="https://github.com/goerz/python-localvenv-kernel">https://github.com/goerz/python-localvenv-kernel</a></li>
<li><a href="https://github.com/pathbird/poetry-kernel">https://github.com/pathbird/poetry-kernel</a></li>
</ul>
<h2 id="license">License</h2>
<p><code>pyproject-local-kernel</code> is open source. See the LICENSE.md file in the source
distribution for more information.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
        
          
          <a href="FAQ/" class="md-footer__link md-footer__link--next" aria-label="Next: FAQ">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                FAQ
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 “bluss” Ulrik Sverdrup
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate", "content.code.copy", "content.tabs.link", "toc.integrate", "toc.follow", "navigation.path", "navigation.top", "navigation.tabs", "navigation.footer"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>